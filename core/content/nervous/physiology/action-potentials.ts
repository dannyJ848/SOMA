/**
 * Action Potentials - Physiology Educational Content
 *
 * Generation and propagation of neuronal action potentials,
 * ion channel function, and electrical signaling.
 */

import { EducationalContent } from '../../types';

export const actionPotentials: EducationalContent = {
  id: 'physiology-action-potentials',
  type: 'process',
  name: 'Action Potentials',
  alternateNames: ['Neural Impulses', 'Spikes', 'Nerve Signals', 'Action Potentials'],

  levels: {
    1: {
      level: 1,
      summary: 'An action potential is an electrical signal that travels along a neuron, allowing it to send messages quickly over long distances.',
      explanation: `An action potential is like a tiny lightning bolt that travels through a neuron. It is how nerve cells send messages from one part of your body to another at incredible speeds.

**What Is an Action Potential?**

Think of it as an electrical wave that moves along a nerve cell. This wave allows your brain to tell your muscles to move, or your fingers to send touch information back to your brain.

**How It Works (Simple Version):**

1. **Resting State**
   - The neuron is calm and waiting
   - Inside is slightly negative compared to outside
   - Like a charged battery waiting to be used

2. **Trigger**
   - A signal arrives from another neuron
   - If the signal is strong enough, it triggers the action potential
   - This threshold is like the breaking point of a rubber band

3. **The Spike**
   - The electrical charge rapidly flips
   - Inside becomes positive, then quickly returns to negative
   - This happens in about 1/1000 of a second!

4. **Propagation**
   - The signal travels down the axon
   - It jumps from one section to the next
   - Cannot go backward - one-way traffic only

5. **Recovery**
   - The neuron resets itself
   - Takes a brief rest (refractory period)
   - Ready for the next signal

**All-or-Nothing Principle:**

Action potentials are "all or nothing" - like a gun firing. Either the signal is strong enough to trigger a full response, or nothing happens at all. A bigger stimulus does not make a bigger action potential - it just makes them happen more frequently.

**Speed Matters:**

- Some signals travel at 2 miles per hour
- Others travel at 270 miles per hour!
- The speed depends on how thick the nerve fiber is and if it has insulation (myelin)

This electrical signaling is how every thought, movement, and sensation works in your body!`,
      keyTerms: [
        { term: 'action potential', definition: 'An electrical signal that travels along a neuron' },
        { term: 'neuron', definition: 'A nerve cell that carries electrical signals' },
        { term: 'axon', definition: 'The long fiber of a neuron that carries signals away' },
        { term: 'threshold', definition: 'The minimum signal strength needed to trigger an action potential' },
        { term: 'refractory period', definition: 'A brief rest period after an action potential when the neuron cannot fire again' },
      ],
      analogies: [
        'An action potential is like a row of dominoes falling - each domino knocks over the next in sequence.',
        'The all-or-nothing principle is like flipping a light switch - it is either on or off, with no dimming.',
        'Action potential propagation is like a wave at a football game - the people stand up and sit down in sequence, moving the wave along.',
      ],
      examples: [
        'When you touch something hot, action potentials race to your brain at over 100 miles per hour.',
        'Your heart beats because of rhythmic action potentials in heart muscle cells.',
        'Every time you blink, action potentials travel from your brain to your eyelid muscles.',
      ],
    },
    2: {
      level: 2,
      summary: 'Action potentials are rapid, transient changes in membrane potential generated by voltage-gated ion channels, propagating along axons through local current flow.',
      explanation: `**Resting Membrane Potential:**

**Ion Distribution:**
- Intracellular: High K+, low Na+, low Cl-, negatively charged proteins
- Extracellular: High Na+, high Cl-, low K+
- Resting potential: -65 to -70 mV (inside negative)

**Establishing Resting Potential:**
- Na+/K+ ATPase: 3 Na+ out, 2 K+ in (electrogenic)
- K+ leak channels: Allow K+ efflux
- Membrane more permeable to K+ than Na+
- Nernst equation predicts equilibrium potentials

**Action Potential Phases:**

**1. Resting State (-70 mV):**
- Voltage-gated Na+ and K+ channels closed
- Only leak channels open
- Ready to respond to stimulus

**2. Depolarization (Threshold at -55 mV):**
- Stimulus opens voltage-gated Na+ channels
- Na+ rushes in (electrochemical gradient)
- Positive feedback: More Na+ influx causes more channels to open
- Rapid depolarization to +30 to +40 mV

**3. Repolarization:**
- Na+ channels inactivate (time-dependent)
- Voltage-gated K+ channels open
- K+ rushes out (driven by concentration and electrical gradient)
- Membrane potential returns toward negative

**4. Hyperpolarization:**
- K+ channels slow to close
- Transient overshoot past resting potential
- Membrane more negative than resting
- "After-hyperpolarization"

**5. Return to Resting:**
- K+ channels close
- Na+/K+ ATPase restores ion gradients
- Ready for next action potential

**Key Properties:**

**All-or-None Response:**
- Subthreshold stimulus: No action potential
- Threshold stimulus: Full action potential
- Suprathreshold stimulus: Same amplitude action potential
- Frequency coding, not amplitude coding

**Refractory Periods:**

**Absolute Refractory Period:**
- Na+ channels inactivated
- No second action possible
- Ensures one-way propagation

**Relative Refractory Period:**
- Some Na+ channels recovered
- K+ channels still open
- Stronger stimulus needed to reach threshold
- Membrane is hyperpolarized

**Propagation:**
- Local current flow depolarizes adjacent membrane
- Sequential opening of Na+ channels
- Continuous conduction in unmyelinated fibers
- Speed proportional to fiber diameter

**Conduction Velocity:**
- Unmyelinated: 0.5-2 m/s
- Myelinated: 10-100 m/s
- Larger diameter = faster conduction
- Temperature dependent`,
      keyTerms: [
        { term: 'depolarization', definition: 'Membrane potential becoming less negative (more positive)' },
        { term: 'repolarization', definition: 'Return of membrane potential to resting negative value' },
        { term: 'hyperpolarization', definition: 'Membrane potential more negative than resting' },
        { term: 'voltage-gated channel', definition: 'Ion channel that opens in response to membrane voltage changes' },
        { term: 'Nernst equation', definition: 'Calculates equilibrium potential for an ion based on concentration gradient' },
      ],
      analogies: [
        'Voltage-gated channels are like automatic doors that open when enough people (charge) gather near them.',
        'The refractory period is like a camera flash recharging - it needs time before it can fire again.',
        'Ion gradients are like water behind a dam - stored energy ready to flow when channels open.',
      ],
    },
    3: {
      level: 3,
      summary: 'Action potential generation involves sophisticated ion channel kinetics, with distinct molecular structures for different channel types, saltatory conduction in myelinated fibers, and modulation by various physiological factors.',
      explanation: `**Ion Channel Structure and Function:**

**Voltage-Gated Sodium Channels:**
- Structure: Single alpha subunit with 4 homologous domains
- Each domain has 6 transmembrane segments (S1-S6)
- S4: Voltage sensor (positively charged amino acids)
- S5-S6: Pore loop (selectivity filter)
- Nav1.6: Predominant at nodes of Ranvier, axon initial segment
- Nav1.2: Axons, dendrites
- Nav1.1, Nav1.3: Different CNS distributions

**Channel States:**
- Closed: Resting, capable of opening
- Open: Na+ conducting
- Inactivated: Cannot open, time-dependent recovery
- State transitions are voltage and time dependent

**Voltage-Gated Potassium Channels:**
- Kv channels: Delayed rectifiers (repolarization)
- Structure: Four separate subunits or tetramer
- Diverse family (Kv1-Kv12)
- BK channels: Large conductance, Ca2+ activated
- SK channels: Small conductance, Ca2+ activated

**Fast vs Slow K+ Channels:**
- Transient A-type: Fast activation and inactivation
- Delayed rectifier: Sustained, responsible for repolarization
- Contribution to action potential shape

**Saltatory Conduction:**

**Myelination:**
- Oligodendrocytes (CNS), Schwann cells (PNS)
- Multiple layers of membrane
- High electrical resistance, low capacitance
- Myelin insulates axon

**Nodes of Ranvier:**
- Unmyelinated gaps every 1-2 mm
- High density of voltage-gated Na+ channels
- Action potentials regenerate at nodes
- Rapid, energy-efficient transmission

**Internodal Regions:**
- Na+ channels excluded from internode
- Kv7.2/7.3 (KCNQ2/Q3) at juxtaparanode
- Myelin attachment proteins (NF155, Caspr, contactin)

**Factors Affecting Conduction:**

**Temperature:**
- Q10 of approximately 1.5-2.0
- Cooling slows Na+ channel kinetics
- Clinical: Cold induces numbness

**Calcium:**
- Extracellular Ca2+ affects Na+ channel gating
- Hypocalcemia: Decreases threshold, tetany
- Hypercalcemia: Increases threshold, weakness

**pH:**
- Acidosis: Na+ channel inhibition
- Alkalosis: May increase excitability

**Pharmacology:**

**Local Anesthetics:**
- Block Na+ channels from inside (use-dependent)
- Lidocaine, bupivacaine
- Preferentially block small, myelinated fibers

**Antiepileptic Drugs:**
- Phenytoin, carbamazepine: Block Na+ channels
- Preferentially affect rapidly firing neurons
- Use-dependent block

**Tetrodotoxin (TTX):**
- Blocks Na+ channels from outside
- Pufferfish toxin
- Research tool for isolating K+ currents

**Toxins:**
- Batrachotoxin: Opens Na+ channels persistently
- Alpha-scorpion toxins: Delay inactivation
- Sea anemone toxins: Similar effects

**Mathematical Models:**

**Hodgkin-Huxley Model (1952):**
- Quantitative description of squid giant axon
- m, h, n gating variables
- Voltage-dependent rate constants
- Nobel Prize 1963

**Modern Models:**
- Markov state models
- Stochastic channel gating
- Temperature dependencies
- Computational neuroscience applications`,
      keyTerms: [
        { term: 'saltatory conduction', definition: 'Action potential jumping between nodes of Ranvier in myelinated fibers' },
        { term: 'selectivity filter', definition: 'Region of ion channel determining which ions can pass' },
        { term: 'use-dependent block', definition: 'Drug block increasing with channel activity/firing frequency' },
        { term: 'Hodgkin-Huxley model', definition: 'Mathematical model of action potential generation' },
        { term: 'Q10', definition: 'Temperature coefficient; rate change with 10 degrees C increase' },
      ],
      clinicalNotes: 'Temperature significantly affects nerve conduction. Hypothermia slows action potential propagation, which is clinically relevant during cardiac surgery or accidental hypothermia. Hyperthermia can cause conduction block. Local anesthetics work by use-dependent blockade of sodium channels - neurons firing at higher frequency are blocked preferentially.',
    },
    4: {
      level: 4,
      summary: 'Advanced understanding of action potentials includes pathophysiology of channelopathies, complex channel kinetics modeling, axonal excitability studies, and clinical electrophysiology applications.',
      explanation: `**Channelopathies:**

**Sodium Channelopathies:**

**Epilepsy:**
- SCN1A (Nav1.1): Dravet syndrome
- SCN2A, SCN8A: Various epilepsy phenotypes
- Gain or loss of function mutations
- Precision medicine approaches

**Pain Disorders:**
- SCN9A (Nav1.7): Erythromelalgia, paroxysmal extreme pain disorder
- Congenital insensitivity to pain (loss of function)
- Therapeutic target for chronic pain

**Periodic Paralysis:**
- SCN4A (Nav1.4): Hyperkalemic, hypokalemic periodic paralysis
- Skeletal muscle sodium channel
- Attacks of weakness

**Potassium Channelopathies:**
- KCNQ2, KCNQ3: Benign familial neonatal epilepsy
- KCNA1 (Kv1.1): Episodic ataxia type 1
- KCNJ18: Thyrotoxic periodic paralysis

**Calcium Channelopathies:**
- Cav2.1 (CACNA1A): Episodic ataxia type 2, familial hemiplegic migraine
- Cav1.1: Hypokalemic periodic paralysis
- Lambert-Eaton syndrome (autoimmune)

**Axonal Excitability Studies:**

**Threshold Tracking:**
- Measures membrane potential changes
- Assesses ion channel function in vivo
- Refractory period, supernormality
- Strength-duration time constant

**Clinical Applications:**
- Peripheral neuropathy characterization
- Demyelinating vs axonal
- Channel dysfunction detection
- Treatment monitoring

**Demyelinating Diseases:**

**Multiple Sclerosis:**
- Conduction block from demyelination
- Na+ channel redistribution (internodal)
- Energy failure in axons
- Neuroprotection strategies

**Guillain-Barre Syndrome:**
- Conduction slowing and block
- Demyelination (AIDP) vs axonal (AMAN)
- Na+ channel antibodies in some variants

**Clinical Electrophysiology:**

**Nerve Conduction Studies (NCS):**
- Compound muscle action potential (CMAP)
- Sensory nerve action potential (SNAP)
- Conduction velocity calculations
- F-waves, H-reflexes

**Interpretation:**
- Demyelination: Slowing, temporal dispersion, block
- Axonal loss: Reduced amplitude, mild slowing
- Mixed patterns

**Electromyography (EMG):**
- Insertional activity
- Spontaneous activity (fibrillations, positive sharp waves)
- Motor unit action potentials (MUAPs)
- Recruitment patterns

**Repetitive Nerve Stimulation:**
- Lambert-Eaton: Incremental response
- Myasthenia gravis: Decremental response
- Presynaptic vs postsynaptic disorders

**Single Fiber EMG:**
- Jitter measurement
- Neuromuscular transmission assessment
- Most sensitive for myasthenia gravis

**Action Potential Propagation in Dendrites:**

**Dendritic Action Potentials:**
- Back-propagating action potentials (bAPs)
- Dendritic Na+ channels
- Synaptic plasticity role
- Influence on synaptic integration

**Calcium Action Potentials:**
- Dendritic Ca2+ spikes
- Burst firing patterns
- Synaptic integration complexity

**Axon Initial Segment (AIS):**

**Structure and Function:**
- Highest Na+ channel density
- Action potential initiation site
- Ankyrin-G and beta-IV spectrin scaffold
- Length: 10-60 micrometers

**Plasticity:**
- AIS position can shift
- Activity-dependent changes
- Homeostatic regulation

**AIS Disorders:**
- Autoimmune encephalitis (anti-AIS)
- Genetic channelopathies
- Axonal injury response`,
      keyTerms: [
        { term: 'channelopathy', definition: 'Disease caused by dysfunction of ion channels' },
        { term: 'strength-duration time constant', definition: 'Measure of membrane excitability from threshold tracking' },
        { term: 'supernormality', definition: 'Period of reduced threshold after action potential' },
        { term: 'jitter', definition: 'Variation in neuromuscular transmission time' },
        { term: 'back-propagating action potential', definition: 'Action potential that spreads from soma into dendrites' },
      ],
      clinicalNotes: 'Axonal excitability testing with threshold tracking can distinguish demyelinating from axonal neuropathies and identify ion channel dysfunction. In ALS, there is often increased persistent Na+ current leading to axonal hyperexcitability, detectable as superexcitability on threshold tracking.',
    },
    5: {
      level: 5,
      summary: 'Expert-level knowledge encompasses quantitative modeling of excitable membranes, advanced electrophysiological techniques, development of targeted therapeutics for channelopathies, and systems neuroscience applications.',
      explanation: `**Advanced Computational Models:**

**Markov Models:**
- Discrete state transitions
- Voltage-dependent rate constants
- Temperature dependence
- Drug binding kinetics
- Stochastic gating simulations

**Molecular Dynamics:**
- Atomistic simulations of channel structure
- Ion permeation mechanisms
- Selectivity filter function
- Drug-channel interactions
- Structure-based drug design

**Multi-Compartment Models:**
- Axon with multiple segments
- Myelinated internodes
- Nodes of Ranvier
- Dendritic trees
- Realistic morphology

**Population Models:**
- Mean-field approximations
- Neural mass models
- Wilson-Cowan model
- Jansen-Rit model for EEG
- Clinical applications (epilepsy, anesthesia)

**Advanced Electrophysiological Techniques:**

**Patch-Clamp Variants:**
- Cell-attached: Single channel recording
- Inside-out, outside-out: Exposed membrane patches
- Whole-cell: Entire cell recording
- Perforated patch: Maintains intracellular milieu
- Automated patch-clamp systems

**Optogenetics:**
- Channelrhodopsin (blue light activation)
- Halorhodopsin (yellow light inhibition)
- Combined with electrophysiology
- Circuit mapping
- Therapeutic potential

**Voltage Imaging:**
- Voltage-sensitive dyes
- Genetically encoded voltage indicators (GEVIs)
- Population activity imaging
- Spatial and temporal resolution trade-offs

**Two-Photon Targeted Recording:**
- In vivo patch-clamp
- Identified neurons in intact circuits
- Dendritic recording
- Behavior correlation

**Therapeutic Development:**

**Precision Medicine for Channelopathies:**
- Genotype-phenotype correlations
- Variant classification
- Functional validation (patch-clamp)
- Targeted therapy selection
- Antisense oligonucleotides

**NaV1.7 Inhibitors:**
- Selective pain targets
- Genetic validation (complete pain insensitivity)
- Clinical trial challenges
- Selectivity vs off-target effects

**KCNQ Activators:**
- Retigabine (now withdrawn)
- Newer Kv7.2/7.3 openers
- Epilepsy, pain indications
- Mechanism-based adverse effects

**Gene Therapy:**
- AAV delivery of ion channels
- Channelopathies with loss of function
- Optogenetic approaches
- Chemogenetic approaches (DREADDs)

**Systems Neuroscience:**

**Neural Coding:**
- Rate coding vs temporal coding
- Spike timing precision
- Population coding
- Information theory approaches
- Decoding algorithms

**Oscillations:**
- Action potential synchrony
- Gamma oscillations (30-80 Hz)
- Theta oscillations (4-8 Hz)
- Spike-field coherence
- Causal manipulations

**Neural Interfaces:**
- Brain-computer interfaces (BCIs)
- Action potential recording arrays
- Utah arrays, Neuropixels
- Signal processing challenges
- Closed-loop stimulation

**Disease Mechanisms:**

**ALS Axonopathy:**
- Distal axon degeneration
- Channel redistribution
- Persistent Na+ current
- Axonal transport deficits
- Excitotoxicity contribution

**Multiple Sclerosis:**
- Acute conduction block
- Na+ channel plasticity
- Chronic axonal degeneration
- Neuroprotective strategies
- Exercise effects

**Epilepsy Network Dynamics:**
- Paroxysmal depolarizing shift
- High-frequency oscillations
- Seizure onset zones
- Propagation pathways
- Stimulation targets

**Research Frontiers:**

**Next-Generation Electrodes:**
- Neuropixels 2.0
- High-density silicon probes
- Thousands of simultaneous recordings
- Long-term stability
- Wireless transmission

**Machine Learning Applications:**
- Spike sorting algorithms
- Pattern recognition
- Real-time decoding
- Closed-loop control
- Automated analysis`,
      keyTerms: [
        { term: 'Markov model', definition: 'Mathematical model using states and transition probabilities' },
        { term: 'GEVI', definition: 'Genetically encoded voltage indicator; protein-based voltage sensor' },
        { term: 'DREADDs', definition: 'Designer receptors exclusively activated by designer drugs' },
        { term: 'paroxysmal depolarizing shift', definition: 'Depolarizing event underlying epileptiform activity' },
        { term: 'spike sorting', definition: 'Algorithmic separation of individual neuron spikes from multiunit recording' },
      ],
      clinicalNotes: 'Expert interpretation: In nerve conduction studies, conduction block (amplitude drop >50% between distal and proximal stimulation) indicates demyelination and is the electrophysiological correlate of clinical weakness in demyelinating neuropathies. In contrast, axonal loss shows uniform amplitude reduction without significant temporal dispersion.',
    },
  },

  media: [
    {
      id: 'action-potential-diagram',
      type: 'diagram',
      filename: 'action-potential-phases.jpg',
      title: 'Action Potential Phases',
      description: 'Graph showing voltage changes and ion channel states during action potential',
    },
  ],

  citations: [
    {
      id: 'hodgkin-huxley',
      type: 'article',
      title: 'A Quantitative Description of Membrane Current and its Application to Conduction and Excitation in Nerve',
      authors: ['Hodgkin, A.L.', 'Huxley, A.F.'],
      source: 'Journal of Physiology',
    },
    {
      id: 'catterall-sodium',
      type: 'article',
      title: 'Voltage-Gated Sodium Channels at 60: Structure, Function and Pathophysiology',
      authors: ['Catterall, W.A.'],
      source: 'Journal of Physiology',
    },
  ],

  crossReferences: [
    { targetId: 'physiology-synaptic-transmission', targetType: 'process', relationship: 'related', label: 'Synaptic Transmission' },
    { targetId: 'physiology-neuroplasticity', targetType: 'process', relationship: 'related', label: 'Neuroplasticity' },
    { targetId: 'histology-neuron-structure', targetType: 'structure', relationship: 'see-also', label: 'Neuron Structure' },
  ],

  tags: {
    systems: ['nervous'],
    topics: ['physiology', 'neuroscience', 'electrophysiology'],
    keywords: ['action potential', 'ion channels', 'neuron', 'electrical signaling', 'conduction'],
    clinicalRelevance: 'high',
    examRelevance: {
      usmle: true,
      nbme: true,
      shelf: ['neurology', 'physiology'],
    },
  },

  createdAt: '2026-01-28T12:00:00.000Z',
  updatedAt: '2026-01-28T12:00:00.000Z',
  version: 1,
  status: 'published',
};

export default actionPotentials;
